{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}

    <h4><a href="#" data-toggle="modal" data-target='#search' class="btn btn-success"><i class="fa fa-edit"></i> Search </a> 
      <a href="#" data-toggle="modal" data-target='#filter' class="btn btn-success"><i class="fa fa-edit"></i> Filter Results </a></h4>
    <div class="modal fade" id="search" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h2 class="modal-title"><font color="#7FCD79">Search</font></h2>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        {{ wtf.quick_form(searchForm)}}
                    </div>
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      <script> $('#search').modal(show); </script>

      <div class="modal fade" id="filter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title"><font color="#7FCD79">Search</font></h2>
              </div>
              <div class="modal-body">
                  <div class="row">
                      <div class="col-md-4">
                          {{ wtf.quick_form(form) }}
                      </div>
                  </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <script> $('#filter').modal(show); </script>
        <h6><font color="#7FCD79">{{numresults}} overlapping regions found for {{region}} {{lowerBound}}:{{upperBound}} from {{source}} data ({{searchtime}} seconds)</font></h6>

    <table class="table table-hover">
            <tbody>
            {% for value in results%}
                <tr>
                  <td>
                      {% if value[4] == "No further information on dataset found." or  value[4] == ""%}
                        <h4> <font color="#144177">{{ value[0] }}</font> </h4>
                        <h5><font color="#7fcdbb"> Overlap: {{ value[2] }}  -  Region Size: {{ value[1] }}  -  Percentage of Overlap: {{ value[3] }}% </font></h5>
                      {% else %}
                        <h4><font color="#144177">{{ value[0] }}</font> <a href="#" data-toggle="modal" data-target='#descriptionModal{{ value[1] }}{{ value[2] }}' ><i class="fa fa-edit"></i> &#9432;</a></h4>
                        <h5><font color="#7fcdbb"> Overlap: {{ value[2] }}  -  Region Size: {{ value[1] }}  -  Percentage of Overlap: {{ value[3] }}% </font></h5>
                        <h5> {{ value[5][:-4] | safe}}<a href="#" data-toggle="modal" data-target='#descriptionModal{{ value[1] }}{{ value[2] }}' ><i class="fa fa-edit"></i> &#8690;</a></p></h5>
                      {% endif %}
                    
                  </td>
                </tr>

            {% endfor %}
          </tbody>
          </table>
          {% for value in results%}
          <div class="modal fade" id="descriptionModal{{ value[1] }}{{ value[2] }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><font color="#7FCD79">{{ value[0] }}</font></h2>
                  </div>
                  <div class="modal-body">
                        {{ value[4] | safe}}
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
            <script> $('#descriptionModal{{ value[1] }}{{ value[2] }}').modal(show); </script>
            {% endfor %}

            <center> 
            <h1>
                <table style=”border: 1px solid white;”>
                    <tr>
                        {% if page != 1 %}
                        <td width = 100>
                            <a href="{{"/result/{}/{}:{}-{}/pg:{}".format(source, region, lowerBound, upperBound, page-1)}}">
                            <table >
                                <tr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<</tr>
                                <tr><h4>Previous</h4></tr>
                            </table>
                            </a>
                        </td>
                        {% endif %}
                        <td width = 5>
                            <table >
                              <tr><font color="#F3FC66">Gi</font></tr>
                              <tr><font color="white"><h5>_</h5></font></tr>
                            </table>
                        </td>
                        {% if page > 6%}
                          {% for i in range(page-5,page+5)%}
                          {% if i != page%}
                          <td width = 5>
                            <a href="{{"/result/{}/{}:{}-{}/pg:{}".format(source, region, lowerBound, upperBound, i)}}">
                            <table>
                              <tr><font color = "#AEFF54">g</font></tr>
                              <tr><h5>{{i}}</h5></tr>
                            </table>
                          </a>
                          </td>
                          {% else %}
                          <td width = 5>
                              <table>
                                <tr><font color = "#FC6306">g</font></tr>
                                <tr><h5>{{i}}</h5></tr>
                              </table>
                            </td>
                          {% endif %}
                          {% endfor %}
                        {% else %}
                          {% for i in range(1,10)%}
                          {% if i != page%}
                          <td width = 5>
                            <a href="{{"/result/{}/{}:{}-{}/pg:{}".format(source, region, lowerBound, upperBound, i)}}">
                            <table>
                              <tr><font color = "#AEFF54">g</font></tr>
                              <tr><h5>{{i}}</h5></tr>
                            </table>
                          </a>
                          </td>
                          {% else %}
                          <td width = 5>
                              <table>
                                <tr><font color = "#FC6306">g</font></tr>
                                <tr><h5>{{i}}</h5></tr>
                              </table>
                            </td>
                          {% endif %}
                          {% endfor %}
                        {% endif %}
                            <td width = 5>
                                <table >
                                  <tr><font color="#7fcdbb">le</font></tr>
                                  <tr><font color="white"><h5>_</h5></font></tr>
                                </table>
                            </td>
                        <td width = 30> 
                          </td>
                        <td> 
                            <a href="{{"/result/{}/{}:{}-{}/pg:{}".format(source, region, lowerBound, upperBound, page+1)}}">
                            <table>
                                <tr>></tr>
                                <tr><h4>Next</h4></tr>
                            </table>
                            </a>
                          </td>
                      </tr>
                    </table>


                  </h1>
                </center> 

{% endblock %}